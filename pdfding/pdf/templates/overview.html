{% extends 'layouts/blank.html' %}

{% block content %}
<content class="block max-w-4xl mx-auto md:p-12">
  <div class="bg-white  md:drop-shadow-2xl shadow-black w-full p-8">
    <h1>PDFs</h1>
    {% for pdf in page_obj %}
    {% with loop_id=forloop.counter %}
    <div x-data="{ delete{{ loop_id }}: false }" class="pb-4">
      <ul>
        <div class="!-mb-1">
          <a href="{% url 'view_pdf' pdf.id %}" class="text-lg font-bold hover:text-green-500">{{ pdf.name }}</a>
        </div>
        {% if pdf.description or pdf.tags.all %}
        <div class="truncate space-x-1 [&>span]: text-gray-800 -mb-1">
          {% for tag in pdf.tags.all %}
          <a href="" class="text-green-400 hover:text-green-500 font-bold">#{{ tag.name }}</a>
          {% endfor %}
          {% if pdf.description %}
          {% if pdf.tags.all %}
          <span>|</span>
          {% endif %}
          <span>{{ pdf.description }}</span>
          {% endif %}
        </div>
        {% endif %}
        <div class="text-gray-500 space-x-1 text-sm">
          <span>{{ pdf.now }} |</span>
          <a href="" class="hover:text-green-400"> Details</a>
          <a href="{% url 'download_pdf' pdf.id %}" class="hover:text-green-400">Download</a>
          <a x-show="delete{{ loop_id }}" href="{% url 'delete_pdf' pdf.id %}" class="text-red-400 hover:text-red-500">Confirm</a>
          <button x-show="delete{{ loop_id }}" @click="delete{{ loop_id }} = false" type="button" class="button-text-cancel">Cancel</button>
          <button x-show="!delete{{ loop_id }}" @click="delete{{ loop_id }} = true" type="button" class="button-text">Delete</button>
        </div>
      </ul>
    </div>
    {% endwith %}
    {% endfor %}
    <div class="flex [&>a]:text-green-400 [&>span]:text-green-400 [&>span]:cursor-default gap-x-3 pt-5">
      {% if page_obj.has_previous %}
        <a class="hover:text-green-500" href="{% url 'pdf_overview_page' page_obj.previous_page_number %}">
            Prev
        </a>
      {% else %}
      <span>Prev</span>
      {% endif %}
      <span class="bg-green-400 !text-gray-100 px-2 rounded-sm">{{ page_obj.number }}</span>
      {% if page_obj.has_next %}
        <a class="hover:text-green-500" href="{% url 'pdf_overview_page' page_obj.next_page_number %}">
            Next
        </a>
      {% else %}
        <span>Next</span>
      {% endif %}
    </div>
  </div>  
</content>
{% endblock %}
